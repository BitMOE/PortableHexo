
/**
 * Module dependencies.
 */

var connect = require('./')
  , http = require('http')
  , fs = require('fs');

function myMiddleware(req, res, next) {
  next();
  // setTimeout(next, 1000);
}

connect()
  .use(connect.favicon())
  // .use(connect.logger('dev'))
  .use(myMiddleware)
  .use(connect.errorHandler())
  .use(function(req, res){
    res.end('hello');
  })
  .listen(3000);

// TODO: cache

// ab -n 5000 -c 50 -k http://local/Readme.md
// connect: 2665
// node-static: 5425

// connect()
//   .use(connect.static(__dirname))
//   .listen(3000);

// var static = require('node-static')
//   , file = new static.Server(__dirname);
// 
// var send = connect.static(__dirname);
// http.createServer(function(req, res){
//   file.serve(req, res);
// }).listen(3000);